{"version":3,"sources":["webpack:///editor.js","webpack:///webpack/bootstrap 1894bb367116bd263052","webpack:///./js/ImportAce.js","webpack:///./js/SyntaxMode.js","webpack:///./js/editor.js","webpack:///./js/index.js","webpack:///./js/newfileplugin.js","webpack:///./js/sidebarpreview.js","webpack:///./js/supported_mimetypes.json"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","parentJsonpFunction","window","chunkIds","moreModules","executeModules","chunkId","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","shift","30","e","onScriptComplete","script","onerror","onload","clearTimeout","timeout","chunk","Error","undefined","installedChunkData","Promise","resolve","promise","reject","head","document","getElementsByTagName","createElement","type","charset","async","nc","setAttribute","src","p","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","setTimeout","appendChild","m","c","d","name","getter","o","defineProperty","configurable","enumerable","get","n","__esModule","object","property","oe","err","console","error","s","./js/ImportAce.js","__webpack_exports__","then","bind","./js/SyntaxMode.js","getSyntaxMode","extension","filetype","loaders","$","when","./js/editor.js","Texteditor","__WEBPACK_IMPORTED_MODULE_0__SyntaxMode__","__WEBPACK_IMPORTED_MODULE_1__ImportAce__","supportedMimeTypes","ace","$container","editor","file","edited","mtime","dir","writeable","mime","size","saving","currentContext","saveTimer","oldTitle","saveMessageTimeout","previewPlugins","registerPreviewPlugin","mimeType","plugin","this","previewPluginsLoaded","preview","previewPluginOnChange","_onSaveTrigger","$message","find","text","t","show","saveFile","aceEditor","getSession","getValue","data","title","css","fadeOut","message","focus","_onCloseTrigger","hideEditor","OC","Notification","showTemporary","closeEditor","on","_onReOpenTrigger","_onEditorTrigger","filename","context","_this","fileList","_ace","loadEditor","history","pushState","_onEdit","_onUnsaved","initialize","container","registerFileActions","_this2","forEach","OCA","Files","fileActions","registerAction","actionHandler","permissions","PERMISSION_READ","icon","imagePath","setDefault","_self","html","append","loadFile","removeClass","configureACE","loadControlBar","setupAutosave","bindVisibleActions","addClass","replace","_","debounce","element","loadPreviewPlugin","resize","loadPreviewControlBar","dialogs","alert","Deferred","init","escapeHTML","controlBar","before","setFilenameMaxLength","bindControlBar","setPreviewMode","mode","makeButton","tooltip","active","button","placement","delay","hide","click","attr","controls","after","unloadControlBar","remove","width","outerWidth","onpopstate","location","hash","substr","edit","setNewLineMode","setShowPrintMargin","setUseWrapMode","setReadOnly","setEditorSyntaxMode","split","setTheme","commands","addCommand","bindKey","win","mac","sender","exec","removeCommand","byName","transposeletters","setMode","success","failure","generateUrl","done","filecontents","fail","jqXHR","JSON","parse","responseText","path","ajax","url","unBindVisibleActions","fileInfoModel","getModelForFile","set","etag","_onClickDocument","event","target","closest","unbind","./js/index.js","value","__WEBPACK_IMPORTED_MODULE_0__sidebarpreview__","__WEBPACK_IMPORTED_MODULE_1__editor__","__WEBPACK_IMPORTED_MODULE_2__newfileplugin__","filePath","querySelector","getAttribute","Files_Texteditor","Plugins","register","ready","./js/newfileplugin.js","newFileMenuPlugin","attach","menu","id","addMenuEntry","displayName","templateName","iconClass","fileType","getCurrentDirectory","createFile","./js/sidebarpreview.js","_classCallCheck","instance","Constructor","TypeError","SidebarPreview","_createClass","defineProperties","props","descriptor","writable","key","protoProps","staticProps","manager","handler","handlePreview","addPreviewHandler","model","$thumbnailDiv","$thumbnailContainer","fallback","previewWidth","parent","previewHeight","getFileContent","getFullPath","content","$editorDiv","children","imports","syntaxModePromise","parts","slice","join","headers","Range","./js/supported_mimetypes.json"],"mappings":"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","file":"editor.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// install a JSONP callback for chunk loading\n/******/ \tvar parentJsonpFunction = window[\"webpackJsonpTexteditor\"];\n/******/ \twindow[\"webpackJsonpTexteditor\"] = function webpackJsonpCallback(chunkIds, moreModules, executeModules) {\n/******/ \t\t// add \"moreModules\" to the modules object,\n/******/ \t\t// then flag all \"chunkIds\" as loaded and fire callback\n/******/ \t\tvar moduleId, chunkId, i = 0, resolves = [], result;\n/******/ \t\tfor(;i < chunkIds.length; i++) {\n/******/ \t\t\tchunkId = chunkIds[i];\n/******/ \t\t\tif(installedChunks[chunkId]) {\n/******/ \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n/******/ \t\t\t}\n/******/ \t\t\tinstalledChunks[chunkId] = 0;\n/******/ \t\t}\n/******/ \t\tfor(moduleId in moreModules) {\n/******/ \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n/******/ \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n/******/ \t\t\t}\n/******/ \t\t}\n/******/ \t\tif(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules, executeModules);\n/******/ \t\twhile(resolves.length) {\n/******/ \t\t\tresolves.shift()();\n/******/ \t\t}\n/******/\n/******/ \t};\n/******/\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// objects to store loaded and loading chunks\n/******/ \tvar installedChunks = {\n/******/ \t\t30: 0\n/******/ \t};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/ \t// This file contains only the entry chunk.\n/******/ \t// The chunk loading function for additional chunks\n/******/ \t__webpack_require__.e = function requireEnsure(chunkId) {\n/******/ \t\tvar installedChunkData = installedChunks[chunkId];\n/******/ \t\tif(installedChunkData === 0) {\n/******/ \t\t\treturn new Promise(function(resolve) { resolve(); });\n/******/ \t\t}\n/******/\n/******/ \t\t// a Promise means \"currently loading\".\n/******/ \t\tif(installedChunkData) {\n/******/ \t\t\treturn installedChunkData[2];\n/******/ \t\t}\n/******/\n/******/ \t\t// setup Promise in chunk cache\n/******/ \t\tvar promise = new Promise(function(resolve, reject) {\n/******/ \t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n/******/ \t\t});\n/******/ \t\tinstalledChunkData[2] = promise;\n/******/\n/******/ \t\t// start chunk loading\n/******/ \t\tvar head = document.getElementsByTagName('head')[0];\n/******/ \t\tvar script = document.createElement('script');\n/******/ \t\tscript.type = \"text/javascript\";\n/******/ \t\tscript.charset = 'utf-8';\n/******/ \t\tscript.async = true;\n/******/ \t\tscript.timeout = 120000;\n/******/\n/******/ \t\tif (__webpack_require__.nc) {\n/******/ \t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n/******/ \t\t}\n/******/ \t\tscript.src = __webpack_require__.p + \"\" + ({\"1\":\"markdown-mode\",\"2\":\"php-mode\",\"3\":\"html-mode\",\"4\":\"svg-mode\",\"5\":\"xml-mode\",\"6\":\"scala-mode\",\"7\":\"lua-mode\",\"8\":\"json-mode\",\"9\":\"js-mode\",\"10\":\"java-mode\",\"11\":\"groovy-mode\",\"12\":\"css-mode\",\"13\":\"coffee-mode\",\"14\":\"ace\",\"15\":\"textile-mode\",\"16\":\"sql-mode\",\"17\":\"sh-mode\",\"18\":\"scss-mode\",\"19\":\"scad-mode\",\"20\":\"rb-mode\",\"21\":\"py-mode\",\"22\":\"ps1-mode\",\"23\":\"pl-mode\",\"24\":\"ml-mode\",\"25\":\"less-mode\",\"26\":\"latex-mode\",\"27\":\"cs-mode\",\"28\":\"h-mode\",\"29\":\"bat-mode\"}[chunkId]||chunkId) + \".bundle.js\";\n/******/ \t\tvar timeout = setTimeout(onScriptComplete, 120000);\n/******/ \t\tscript.onerror = script.onload = onScriptComplete;\n/******/ \t\tfunction onScriptComplete() {\n/******/ \t\t\t// avoid mem leaks in IE.\n/******/ \t\t\tscript.onerror = script.onload = null;\n/******/ \t\t\tclearTimeout(timeout);\n/******/ \t\t\tvar chunk = installedChunks[chunkId];\n/******/ \t\t\tif(chunk !== 0) {\n/******/ \t\t\t\tif(chunk) {\n/******/ \t\t\t\t\tchunk[1](new Error('Loading chunk ' + chunkId + ' failed.'));\n/******/ \t\t\t\t}\n/******/ \t\t\t\tinstalledChunks[chunkId] = undefined;\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t\thead.appendChild(script);\n/******/\n/******/ \t\treturn promise;\n/******/ \t};\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// on error function for async loading\n/******/ \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./js/index.js\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./js/ImportAce.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/*\n * @copyright Copyright (c) 2019 Julius Härtl <jus@bitgrid.net>\n *\n * @author Julius Härtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function () {\n  return __webpack_require__.e/* import() */(14).then(__webpack_require__.bind(null, \"./node_modules/brace/index.js\"));\n});\n\n/***/ }),\n\n/***/ \"./js/SyntaxMode.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = getSyntaxMode;\nvar filetype = {};\n// add file extensions like this: filetype[\"extension\"] = \"filetype\":\nfiletype[\"bat\"] = \"batchfile\";\nfiletype[\"cmd\"] = \"batchfile\";\nfiletype[\"h\"] = \"c_cpp\";\nfiletype[\"c\"] = \"c_cpp\";\nfiletype[\"clj\"] = \"clojure\";\nfiletype[\"coffee\"] = \"coffee\"; // coffescript can be compiled to javascript\nfiletype[\"cpp\"] = \"c_cpp\";\nfiletype[\"cs\"] = \"csharp\";\nfiletype[\"css\"] = \"css\";\nfiletype[\"groovy\"] = \"groovy\";\nfiletype[\"htm\"] = \"html\";\nfiletype[\"html\"] = \"html\";\nfiletype[\"tt\"] = \"html\";\nfiletype[\"java\"] = \"java\";\nfiletype[\"js\"] = \"javascript\";\nfiletype[\"jsm\"] = \"javascript\";\nfiletype[\"json\"] = \"json\";\nfiletype[\"latex\"] = \"latex\";\nfiletype[\"tex\"] = \"latex\";\nfiletype[\"less\"] = \"less\";\nfiletype[\"ly\"] = \"latex\";\nfiletype[\"ily\"] = \"latex\";\nfiletype[\"lua\"] = \"lua\";\nfiletype[\"markdown\"] = \"markdown\";\nfiletype[\"md\"] = \"markdown\";\nfiletype[\"mdown\"] = \"markdown\";\nfiletype[\"mdwn\"] = \"markdown\";\nfiletype[\"mkd\"] = \"markdown\";\nfiletype[\"ml\"] = \"ocaml\";\nfiletype[\"mli\"] = \"ocaml\";\nfiletype[\"pl\"] = \"perl\";\nfiletype[\"php\"] = \"php\";\nfiletype[\"ps1\"] = \"powershell\";\nfiletype[\"py\"] = \"python\";\nfiletype[\"rb\"] = \"ruby\";\nfiletype[\"scad\"] = \"scad\"; // seems to be something like 3d model files printed with e.g. reprap\nfiletype[\"scala\"] = \"scala\";\nfiletype[\"scss\"] = \"scss\"; // \"sassy css\"\nfiletype[\"sh\"] = \"sh\";\nfiletype[\"sql\"] = \"sql\";\nfiletype[\"svg\"] = \"svg\";\nfiletype[\"textile\"] = \"textile\"; // related to markdown\nfiletype[\"xml\"] = \"xml\";\n\nvar loaders = {};\n// add loader like this: loaders[\"filetype\"] = () => require(\"promise?brace/mode/filetype\"):\n\n// note that these require statements can't be generated from the filetypes dynamically\n// to make sure webpack can analyse our dependencies\nloaders[\"batchfile\"] = function () {\n\treturn __webpack_require__.e/* import() */(29).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/batchfile.js\"));\n};\nloaders[\"c_cpp\"] = function () {\n\treturn __webpack_require__.e/* import() */(28).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/c_cpp.js\"));\n};\nloaders[\"coffee\"] = function () {\n\treturn __webpack_require__.e/* import() */(13).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/coffee.js\"));\n};\nloaders[\"cs\"] = function () {\n\treturn __webpack_require__.e/* import() */(27).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/csharp.js\"));\n};\nloaders[\"css\"] = function () {\n\treturn __webpack_require__.e/* import() */(12).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/css.js\"));\n};\nloaders[\"groovy\"] = function () {\n\treturn __webpack_require__.e/* import() */(11).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/groovy.js\"));\n};\nloaders[\"html\"] = function () {\n\treturn __webpack_require__.e/* import() */(3).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/html.js\"));\n};\nloaders[\"java\"] = function () {\n\treturn __webpack_require__.e/* import() */(10).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/java.js\"));\n};\nloaders[\"javascript\"] = function () {\n\treturn __webpack_require__.e/* import() */(9).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/javascript.js\"));\n};\nloaders[\"json\"] = function () {\n\treturn __webpack_require__.e/* import() */(8).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/json.js\"));\n};\nloaders[\"latex\"] = function () {\n\treturn __webpack_require__.e/* import() */(26).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/latex.js\"));\n};\nloaders[\"less\"] = function () {\n\treturn __webpack_require__.e/* import() */(25).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/less.js\"));\n};\nloaders[\"lua\"] = function () {\n\treturn __webpack_require__.e/* import() */(7).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/lua.js\"));\n};\nloaders[\"markdown\"] = function () {\n\treturn __webpack_require__.e/* import() */(1).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/markdown.js\"));\n};\nloaders[\"ocaml\"] = function () {\n\treturn __webpack_require__.e/* import() */(24).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/ocaml.js\"));\n};\nloaders[\"perl\"] = function () {\n\treturn __webpack_require__.e/* import() */(23).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/perl.js\"));\n};\nloaders[\"php\"] = function () {\n\treturn __webpack_require__.e/* import() */(2).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/php.js\"));\n};\nloaders[\"powershell\"] = function () {\n\treturn __webpack_require__.e/* import() */(22).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/powershell.js\"));\n};\nloaders[\"python\"] = function () {\n\treturn __webpack_require__.e/* import() */(21).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/python.js\"));\n};\nloaders[\"ruby\"] = function () {\n\treturn __webpack_require__.e/* import() */(20).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/ruby.js\"));\n};\nloaders[\"scad\"] = function () {\n\treturn __webpack_require__.e/* import() */(19).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/scad.js\"));\n}; // seems to be something like 3d model files printed with e.g. reprap\nloaders[\"scala\"] = function () {\n\treturn __webpack_require__.e/* import() */(6).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/scala.js\"));\n};\nloaders[\"scss\"] = function () {\n\treturn __webpack_require__.e/* import() */(18).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/scss.js\"));\n}; // \"sassy css\"\nloaders[\"sh\"] = function () {\n\treturn __webpack_require__.e/* import() */(17).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/sh.js\"));\n};\nloaders[\"sql\"] = function () {\n\treturn __webpack_require__.e/* import() */(16).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/sql.js\"));\n};\nloaders[\"svg\"] = function () {\n\treturn __webpack_require__.e/* import() */(4).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/svg.js\"));\n};\nloaders[\"textile\"] = function () {\n\treturn __webpack_require__.e/* import() */(15).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/textile.js\"));\n}; // related to markdown\nloaders[\"xml\"] = function () {\n\treturn __webpack_require__.e/* import() */(5).then(__webpack_require__.bind(null, \"./node_modules/brace/mode/xml.js\"));\n};\n\nfunction getSyntaxMode(extension) {\n\tvar type = filetype[extension];\n\tif (type) {\n\t\t// Then it must be in the array, so load the custom syntax mode\n\t\t// Set the syntax mode\n\t\treturn loaders[type]().then(function () {\n\t\t\treturn type;\n\t\t});\n\t}\n\n\treturn $.when();\n}\n\n/***/ }),\n\n/***/ \"./js/editor.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Texteditor; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__SyntaxMode__ = __webpack_require__(\"./js/SyntaxMode.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ImportAce__ = __webpack_require__(\"./js/ImportAce.js\");\n\n\n\n/** @type array[] supportedMimeTypes */\nvar supportedMimeTypes = __webpack_require__(\"./js/supported_mimetypes.json\");\n\nvar ace = void 0;\nvar Texteditor = {\n\n\t/**\n  * Holds the editor container\n  */\n\t$container: null,\n\n\t/**\n  * Holds the editor element ID\n  */\n\teditor: 'editor',\n\n\t/**\n  * Stores info on the file being edited\n  */\n\tfile: {\n\t\tedited: false,\n\t\tmtime: null,\n\t\tdir: null,\n\t\tname: null,\n\t\twriteable: null,\n\t\tmime: null,\n\t\tsize: null\n\t},\n\n\t/**\n  * Stored the saving state\n  */\n\tsaving: false,\n\n\t/**\n  * Current files app context\n  */\n\tcurrentContext: null,\n\n\t/**\n  * Stores the autosave timer\n  */\n\tsaveTimer: null,\n\n\t/**\n  * Stores the old page title\n  */\n\toldTitle: null,\n\n\t/**\n  * Stores the timeout for the saving message\n  */\n\tsaveMessageTimeout: null,\n\n\t/**\n  * preview plugins by mimetype\n  */\n\tpreviewPlugins: {},\n\n\tregisterPreviewPlugin: function registerPreviewPlugin(mimeType, plugin) {\n\t\tthis.previewPlugins[mimeType] = plugin;\n\t},\n\n\tpreviewPluginsLoaded: {},\n\n\t/**\n  * preview element\n  */\n\tpreview: null,\n\n\tpreviewPluginOnChange: null,\n\n\t/**\n  * Save handler, triggered by the button, or keyboard\n  */\n\t_onSaveTrigger: function _onSaveTrigger() {\n\t\t// Don't save if not edited\n\t\tif (!Texteditor.file.edited) {\n\t\t\treturn;\n\t\t}\n\t\t// Don't try to save twice\n\t\tif (Texteditor.saving) {\n\t\t\treturn;\n\t\t} else {\n\t\t\tTexteditor.saving = true;\n\t\t\tTexteditor.file.edited = false;\n\t\t}\n\n\t\t// Can any fade outs on the saving message\n\t\tclearTimeout(Texteditor.saveMessageTimeout);\n\n\t\t// Set the saving status\n\t\tvar $message = $('#editor_controls').find('small.saving-message');\n\t\t$message.text(t('files_texteditor', 'saving...')).show();\n\t\t// Send to server\n\t\tTexteditor.saveFile(window.aceEditor.getSession().getValue(), Texteditor.file, function (data) {\n\t\t\t// Yay\n\t\t\tif (Texteditor.file.edited == false) {\n\t\t\t\tdocument.title = Texteditor.file.name + ' - ' + Texteditor.oldTitle;\n\t\t\t\t$('small.unsaved-star').css('display', 'none');\n\t\t\t}\n\t\t\tTexteditor.file.mtime = data.mtime;\n\t\t\tTexteditor.file.size = data.size;\n\n\t\t\t$message.text(t('files_texteditor', 'saved!'));\n\t\t\tTexteditor.saveMessageTimeout = setTimeout(function () {\n\t\t\t\t$('small.saving-message').fadeOut(200);\n\t\t\t}, 2000);\n\t\t}, function (message) {\n\t\t\t// Boo\n\t\t\tif (typeof message == 'undefined') {\n\t\t\t\t$('small.saving-message').text(t('files_texteditor', 'failed!'));\n\t\t\t} else {\n\t\t\t\t$('small.saving-message').text(message);\n\t\t\t}\n\t\t\tTexteditor.saveMessageTimeout = setTimeout(function () {\n\t\t\t\t$('small.saving-message').fadeOut(200);\n\t\t\t}, 5000);\n\t\t\tTexteditor.file.edited = true;\n\t\t});\n\t\tTexteditor.saving = false;\n\t\twindow.aceEditor.focus();\n\t},\n\n\t/**\n  * Handles on close button click\n  */\n\t_onCloseTrigger: function _onCloseTrigger() {\n\t\t// Hide or close?\n\t\tif (!Texteditor.file.edited) {\n\t\t\tTexteditor.closeEditor();\n\t\t} else {\n\t\t\t// Trick the autosave attempt into thinking we have no changes\n\t\t\tTexteditor.file.edited = false;\n\t\t\t// Hide the editor\n\t\t\tTexteditor.hideEditor();\n\t\t\t// Try to save\n\t\t\tTexteditor.saveFile(window.aceEditor.getSession().getValue(), Texteditor.file, function () {\n\t\t\t\tOC.Notification.showTemporary(t('files_texteditor', 'Saved'));\n\t\t\t\t// Remove the editor\n\t\t\t\tTexteditor.closeEditor();\n\t\t\t}, function () {\n\t\t\t\tOC.Notification.showTemporary(t('files_texteditor', 'There was a problem saving your changes. Click to resume editing.'));\n\t\t\t\t$('#notification').data('reopeneditor', true).on('click', Texteditor._onReOpenTrigger);\n\t\t\t\tTexteditor.file.edited = true;\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n  * Handles the trigger or re open editor\n  */\n\t_onReOpenTrigger: function _onReOpenTrigger() {\n\t\tif ($('#notification').data('reopeneditor') == true) {\n\t\t\tdocument.title = Texteditor.file.name + ' - ' + Texteditor.oldTitle;\n\t\t\tTexteditor.$container.show();\n\t\t}\n\t},\n\n\t/**\n  * Handles the FileAction click event\n  */\n\t_onEditorTrigger: function _onEditorTrigger(filename, context) {\n\t\tvar _this = this;\n\n\t\tthis.currentContext = context;\n\t\tthis.file.name = filename;\n\t\tthis.file.dir = context.dir;\n\t\tthis.fileList = context.fileList;\n\t\tObject(__WEBPACK_IMPORTED_MODULE_1__ImportAce__[\"a\" /* default */])().then(function (_ace) {\n\t\t\tace = _ace;\n\t\t\t_this.loadEditor(Texteditor.$container, Texteditor.file);\n\t\t\thistory.pushState({\n\t\t\t\tfile: filename,\n\t\t\t\tdir: context.dir\n\t\t\t}, 'Editor', '#editor');\n\t\t});\n\t},\n\n\t/**\n  * Handler for edits detected\n  */\n\t_onEdit: function _onEdit() {\n\t\tif (!Texteditor.file.edited) {\n\t\t\tTexteditor.file.edited = true;\n\t\t\tif (!Texteditor.saving) {\n\t\t\t\tTexteditor._onUnsaved();\n\t\t\t}\n\t\t}\n\t\tif (this.previewPluginOnChange) {\n\t\t\tvar text = window.aceEditor.getSession().getValue();\n\t\t\tthis.previewPluginOnChange(text, this.preview);\n\t\t}\n\t},\n\n\t/**\n  * Handler when unsaved work is detected\n  */\n\t_onUnsaved: function _onUnsaved() {\n\t\tdocument.title = '* ' + Texteditor.file.name + ' - ' + Texteditor.oldTitle;\n\t\t$('small.unsaved-star').css('display', 'inline-block');\n\t},\n\n\t/**\n  * Setup on page load\n  */\n\tinitialize: function initialize(container) {\n\t\t// Don't load if not in the files app TODO: Fix for sharing\n\t\tif (!$('#content.app-files').length) {\n\t\t\treturn;\n\t\t}\n\t\tthis.$container = container;\n\t\tthis.registerFileActions();\n\t\tthis.oldTitle = document.title;\n\t},\n\n\t/**\n  * Registers the file actions\n  */\n\tregisterFileActions: function registerFileActions() {\n\t\tvar _this2 = this;\n\n\t\tsupportedMimeTypes.forEach(function (mime) {\n\t\t\tOCA.Files.fileActions.registerAction({\n\t\t\t\tname: 'Edit',\n\t\t\t\tmime: mime,\n\t\t\t\tactionHandler: _this2._onEditorTrigger.bind(_this2),\n\t\t\t\tpermissions: OC.PERMISSION_READ,\n\t\t\t\ticon: function icon() {\n\t\t\t\t\treturn OC.imagePath('core', 'actions/edit');\n\t\t\t\t}\n\t\t\t});\n\t\t\tOCA.Files.fileActions.setDefault(mime, 'Edit');\n\t\t});\n\t},\n\n\t/**\n  * Actually fire up the editor in a container\n  */\n\tloadEditor: function loadEditor(container, file) {\n\t\tvar _self = this;\n\t\t// Insert the editor into the container\n\t\tcontainer.html('<div id=\"editor_overlay\"></div>' + '<div id=\"editor_container\" class=\"icon-loading\">' + '<div id=\"editor_wrap\"><div id=\"editor\"></div>' + '<div id=\"preview_wrap\"><div id=\"preview\"></div></div></div></div>');\n\t\t$('#content').append(container);\n\n\t\t// Get the file data\n\t\tthis.loadFile(file.dir, file.name, function (file, data) {\n\t\t\t// Success!\n\t\t\t// Sort the title\n\t\t\tdocument.title = file.name + ' - ' + Texteditor.oldTitle;\n\t\t\t// Load ace\n\t\t\t$('#' + _self.editor).text(data);\n\t\t\t// Remove loading\n\t\t\t$('#editor_container').removeClass('icon-loading');\n\t\t\t// Configure ace\n\t\t\t_self.configureACE(file);\n\t\t\t// Show the controls\n\t\t\t_self.loadControlBar(file);\n\t\t\twindow.aceEditor.getSession().on('change', _self.setupAutosave);\n\t\t\t_self.bindVisibleActions();\n\t\t\twindow.aceEditor.focus();\n\n\t\t\tif (_self.previewPlugins[file.mime]) {\n\t\t\t\t_self.preview = container.find('#preview');\n\t\t\t\t_self.preview.addClass(file.mime.replace('/', '-'));\n\t\t\t\tcontainer.find('#editor_container').addClass('hasPreview');\n\t\t\t\t_self.previewPluginOnChange = _.debounce(function (text, element) {\n\t\t\t\t\t_self.loadPreviewPlugin(file.mime).then(function () {\n\t\t\t\t\t\t_self.previewPlugins[file.mime].preview(text, element);\n\t\t\t\t\t});\n\t\t\t\t}, 200);\n\t\t\t\tvar text = window.aceEditor.getSession().getValue();\n\t\t\t\t_self.previewPluginOnChange(text, _self.preview);\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\twindow.aceEditor.resize();\n\t\t\t\t}, 500);\n\t\t\t\t_self.loadPreviewControlBar();\n\t\t\t} else {\n\t\t\t\t_self.previewPluginOnChange = null;\n\t\t\t}\n\t\t}, function (message) {\n\t\t\t// Oh dear\n\t\t\tOC.dialogs.alert(message, t('files_texteditor', 'An error occurred!'));\n\t\t\t_self.closeEditor();\n\t\t});\n\t},\n\n\tloadPreviewPlugin: function loadPreviewPlugin(mime) {\n\t\tif (this.previewPluginsLoaded[mime]) {\n\t\t\treturn $.Deferred().resolve().promise();\n\t\t}\n\t\tthis.previewPluginsLoaded[mime] = true;\n\t\tvar plugin = this.previewPlugins[mime];\n\t\treturn $.when(plugin.init());\n\t},\n\n\t/**\n  * Load the editor control bar\n  */\n\tloadControlBar: function loadControlBar(file) {\n\t\tvar html = '<small class=\"filename\">' + escapeHTML(file.name) + '</small>' + '<small class=\"unsaved-star\" style=\"display: none\">*</small>' + '<small class=\"saving-message\">' + '</small>' + '<button id=\"editor_close\" class=\"icon-close svg\"></button>';\n\t\tvar controlBar = $('<div id=\"editor_controls\"></div>').html(html);\n\t\t$('#editor_wrap').before(controlBar);\n\t\tthis.setFilenameMaxLength();\n\t\tthis.bindControlBar();\n\t},\n\n\tsetPreviewMode: function setPreviewMode(mode) {\n\t\tvar container = $('#app-content-texteditor');\n\t\tvar controlBar = $('#preview_editor_controls');\n\t\tcontrolBar.find('button').removeClass('active');\n\t\tcontrolBar.find('button[data-type=\"' + mode + '\"]').addClass('active');\n\t\tswitch (mode) {\n\t\t\tcase 'mixed':\n\t\t\t\tcontainer.find('#editor_container').addClass('hasPreview');\n\t\t\t\tcontainer.find('#editor_container').removeClass('onlyPreview');\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\tcontainer.find('#editor_container').removeClass('hasPreview');\n\t\t\t\tcontainer.find('#editor_container').removeClass('onlyPreview');\n\t\t\t\tbreak;\n\t\t\tcase 'image':\n\t\t\t\tcontainer.find('#editor_container').addClass('hasPreview');\n\t\t\t\tcontainer.find('#editor_container').addClass('onlyPreview');\n\t\t\t\tbreak;\n\t\t}\n\t\tsetTimeout(function () {\n\t\t\twindow.aceEditor.resize();\n\t\t}, 500);\n\t},\n\n\tloadPreviewControlBar: function loadPreviewControlBar() {\n\t\tvar makeButton = function (type, tooltip, active) {\n\t\t\tvar button = $('<button/>');\n\t\t\tbutton.tooltip({\n\t\t\t\ttitle: tooltip,\n\t\t\t\tcontainer: 'body',\n\t\t\t\tplacement: 'bottom',\n\t\t\t\tdelay: { show: 500, hide: 0 }\n\t\t\t});\n\t\t\tif (active) {\n\t\t\t\tbutton.addClass('active');\n\t\t\t}\n\t\t\tbutton.click(this.setPreviewMode.bind(this, type));\n\t\t\tbutton.attr('data-type', type);\n\t\t\treturn button.css('background-image', 'url(\"' + OC.imagePath('files_texteditor', type) + '\")');\n\t\t}.bind(this);\n\n\t\tvar controls = $('<span/>').attr('id', 'preview_editor_controls');\n\t\tcontrols.append(makeButton('text', t('files_texteditor', 'Edit')));\n\t\tcontrols.append(makeButton('mixed', t('files_texteditor', 'Mixed'), true));\n\t\tcontrols.append(makeButton('image', t('files_texteditor', 'Preview')));\n\t\t$('#editor_close').after(controls);\n\t},\n\n\t/**\n  * Removes the control bar\n  */\n\tunloadControlBar: function unloadControlBar() {\n\t\t$('#editor_controls').remove();\n\t},\n\n\t/**\n  * Set the max width of the filename to prevent wrapping\n  */\n\tsetFilenameMaxLength: function setFilenameMaxLength() {\n\t\t// Get the width of the control bar\n\t\tvar controlBar = $('#editor_controls').width();\n\t\t// Get the width of all of the other controls\n\t\tvar controls = $('small.saving-message').outerWidth(true);\n\t\tcontrols += $('small.unsaved-star').outerWidth(true);\n\t\tcontrols += $('#editor_close').outerWidth(true);\n\t\t// Set the max width\n\t\t$('small.filename').css('max-width', controlBar - controls - 28);\n\t},\n\n\t/**\n  * Binds the control events on the control bar\n  */\n\tbindControlBar: function bindControlBar() {\n\t\t$('#editor_close').on('click', _.bind(this._onCloseTrigger, this));\n\t\t$(window).resize(Texteditor.setFilenameMaxLength);\n\t\twindow.onpopstate = function () {\n\t\t\tvar hash = location.hash.substr(1);\n\t\t\tif (hash.substr(0, 6) !== 'editor') {\n\t\t\t\tthis._onCloseTrigger();\n\t\t\t}\n\t\t}.bind(this);\n\t},\n\n\t/**\n  * Configure the ACE editor\n  */\n\tconfigureACE: function configureACE(file) {\n\t\twindow.aceEditor = ace.edit(this.editor);\n\t\taceEditor.getSession().setNewLineMode(\"windows\");\n\t\taceEditor.setShowPrintMargin(false);\n\t\taceEditor.getSession().setUseWrapMode(true);\n\t\tif (!file.writeable) {\n\t\t\taceEditor.setReadOnly(true);\n\t\t}\n\t\tif (file.mime && file.mime === 'text/html') {\n\t\t\tthis.setEditorSyntaxMode('html');\n\t\t} else {\n\t\t\t// Set the syntax mode based on the file extension\n\t\t\tthis.setEditorSyntaxMode(file.name.split('.')[file.name.split('.').length - 1]);\n\t\t}\n\t\t// Set the theme\n\t\t__webpack_require__.e/* import() */(0/* duplicate */).then(__webpack_require__.bind(null, \"./node_modules/brace/theme/clouds.js\")).then(function () {\n\t\t\twindow.aceEditor.setTheme(\"ace/theme/clouds\");\n\t\t});\n\t\t// Bind the edit event\n\t\twindow.aceEditor.getSession().on('change', this._onEdit.bind(this));\n\t\t// Bind save trigger\n\t\twindow.aceEditor.commands.addCommand({\n\t\t\tname: \"save\",\n\t\t\tbindKey: {\n\t\t\t\twin: \"Ctrl-S\",\n\t\t\t\tmac: \"Command-S\",\n\t\t\t\tsender: \"editor\"\n\t\t\t},\n\t\t\texec: Texteditor._onSaveTrigger\n\t\t});\n\n\t\t// disable Ctrl-T shortcut in ace to allow new tab feature in browser\n\t\twindow.aceEditor.commands.removeCommand(window.aceEditor.commands.byName.transposeletters);\n\t},\n\n\t/**\n  * Sets the syntax highlighting for the editor based on the file extension\n  */\n\tsetEditorSyntaxMode: function setEditorSyntaxMode(extension) {\n\t\tObject(__WEBPACK_IMPORTED_MODULE_0__SyntaxMode__[\"a\" /* getSyntaxMode */])(extension).then(function (mode) {\n\t\t\tif (mode) {\n\t\t\t\twindow.aceEditor.getSession().setMode('ace/mode/' + mode);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Loads the data through AJAX\n  */\n\tloadFile: function loadFile(dir, filename, success, failure) {\n\t\t$.get(OC.generateUrl('/apps/files_texteditor/ajax/loadfile'), {\n\t\t\tfilename: filename,\n\t\t\tdir: dir\n\t\t}).done(function (data) {\n\t\t\t// Call success callback\n\t\t\tTexteditor.file.writeable = data.writeable;\n\t\t\tTexteditor.file.mime = data.mime;\n\t\t\tTexteditor.file.mtime = data.mtime;\n\t\t\tsuccess(Texteditor.file, data.filecontents);\n\t\t}).fail(function (jqXHR) {\n\t\t\tfailure(JSON.parse(jqXHR.responseText).message);\n\t\t});\n\t},\n\n\t/**\n  * Send the new file data back to the server\n  */\n\tsaveFile: function saveFile(data, file, success, failure) {\n\t\t// Send the post request\n\t\tvar path = file.dir + file.name;\n\t\tif (file.dir !== '/') {\n\t\t\tpath = file.dir + '/' + file.name;\n\t\t}\n\t\t$.ajax({\n\t\t\ttype: 'PUT',\n\t\t\turl: OC.generateUrl('/apps/files_texteditor/ajax/savefile'),\n\t\t\tdata: {\n\t\t\t\tfilecontents: data,\n\t\t\t\tpath: path,\n\t\t\t\tmtime: file.mtime\n\t\t\t}\n\t\t}).done(success).fail(function (jqXHR) {\n\t\t\tvar message;\n\n\t\t\ttry {\n\t\t\t\tmessage = JSON.parse(jqXHR.responseText).message;\n\t\t\t} catch (e) {}\n\n\t\t\tfailure(message);\n\t\t});\n\t},\n\n\t/**\n  * Close the editor for good\n  */\n\tcloseEditor: function closeEditor() {\n\t\tthis.$container.html('').show();\n\t\tthis.unloadControlBar();\n\t\tthis.unBindVisibleActions();\n\t\tvar fileInfoModel = this.fileList.getModelForFile(this.file.name);\n\t\tif (fileInfoModel) {\n\t\t\tfileInfoModel.set({\n\t\t\t\t// temp dummy, until we can do a PROPFIND\n\t\t\t\tetag: fileInfoModel.get('id') + this.file.mtime,\n\t\t\t\tmtime: this.file.mtime * 1000,\n\t\t\t\tsize: this.file.size\n\t\t\t});\n\t\t}\n\t\tdocument.title = this.oldTitle;\n\t},\n\n\t/**\n  * Hide the editor (unsaved changes)\n  */\n\thideEditor: function hideEditor() {\n\t\tthis.$container.hide();\n\t\tdocument.title = this.oldTitle;\n\t\tthis.unBindVisibleActions();\n\t},\n\n\t/**\n  * Configure the autosave timer\n  */\n\tsetupAutosave: function setupAutosave() {\n\t\tclearTimeout(this.saveTimer);\n\t\tthis.saveTimer = setTimeout(Texteditor._onSaveTrigger, 3000);\n\t},\n\n\t/**\n  * Handles event when clicking outside editor\n  */\n\t_onClickDocument: function _onClickDocument(event) {\n\t\t// Check if click was inside the editor or not.\n\t\tif (!$(event.target).closest('#editor_container').length && !$(event.target).closest('.oc-dialog').length) {\n\t\t\t// Edit the editor\n\t\t\tTexteditor._onCloseTrigger();\n\t\t}\n\t},\n\n\t/*\n  * Binds actions that need to happen whilst the editor is visible\n  */\n\tbindVisibleActions: function bindVisibleActions() {\n\t\t$(document).bind('click', this._onClickDocument);\n\t},\n\n\t/**\n  * Unbinds actions that happen whilst the editor is visible\n  */\n\tunBindVisibleActions: function unBindVisibleActions() {\n\t\t$(document).unbind('click', this._onClickDocument);\n\t}\n\n};\n\n/***/ }),\n\n/***/ \"./js/index.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__sidebarpreview__ = __webpack_require__(\"./js/sidebarpreview.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__editor__ = __webpack_require__(\"./js/editor.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__newfileplugin__ = __webpack_require__(\"./js/newfileplugin.js\");\n/**\n * ownCloud - Files_Texteditor\n *\n * This file is licensed under the Affero General Public License version 3 or\n * later. See the COPYING file.\n *\n * @author Tom Needham <tom@owncloud.com>\n * @copyright Tom Needham 2015\n */\n\n\n\n\n\n// convince webpack to load chunks\n__webpack_require__.p = OC.filePath('files_texteditor', 'js', '../build/');\nvar script = document.querySelector('[nonce]');\n__webpack_require__.nc = script['nonce'] || script.getAttribute('nonce');\n\nOCA.Files_Texteditor = __WEBPACK_IMPORTED_MODULE_1__editor__[\"a\" /* Texteditor */];\n\nOC.Plugins.register('OCA.Files.NewFileMenu', __WEBPACK_IMPORTED_MODULE_2__newfileplugin__[\"a\" /* newFileMenuPlugin */]);\nOC.Plugins.register('OCA.Files.SidebarPreviewManager', new __WEBPACK_IMPORTED_MODULE_0__sidebarpreview__[\"a\" /* SidebarPreview */]());\n\n$(document).ready(function () {\n  $('#editor').remove();\n  OCA.Files_Texteditor.initialize($('<div id=\"app-content-texteditor\"></div>'));\n});\n\n/***/ }),\n\n/***/ \"./js/newfileplugin.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return newFileMenuPlugin; });\nvar newFileMenuPlugin = {\n\n\tattach: function attach(menu) {\n\t\tvar fileList = menu.fileList;\n\n\t\t// only attach to main file list, public view is not supported yet\n\t\tif (fileList.id !== 'files') {\n\t\t\treturn;\n\t\t}\n\n\t\t// register the new menu entry\n\t\tmenu.addMenuEntry({\n\t\t\tid: 'file',\n\t\t\tdisplayName: t('files_texteditor', 'New text file'),\n\t\t\ttemplateName: t('files_texteditor', 'New text file.txt'),\n\t\t\ticonClass: 'icon-filetype-text',\n\t\t\tfileType: 'file',\n\t\t\tactionHandler: function actionHandler(name) {\n\t\t\t\tvar dir = fileList.getCurrentDirectory();\n\t\t\t\t// first create the file\n\t\t\t\tfileList.createFile(name).then(function () {\n\t\t\t\t\t// once the file got successfully created,\n\t\t\t\t\t// open the editor\n\t\t\t\t\tFiles_Texteditor._onEditorTrigger(name, {\n\t\t\t\t\t\tfileList: fileList,\n\t\t\t\t\t\tdir: dir\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n};\n\n/***/ }),\n\n/***/ \"./js/sidebarpreview.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return SidebarPreview; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__SyntaxMode__ = __webpack_require__(\"./js/SyntaxMode.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ImportAce__ = __webpack_require__(\"./js/ImportAce.js\");\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\n * Copyright (c) 2016\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n\n\n\n/** @type array[] supportedMimeTypes */\nvar supportedMimeTypes = __webpack_require__(\"./js/supported_mimetypes.json\");\n\nvar SidebarPreview = function () {\n\tfunction SidebarPreview() {\n\t\t_classCallCheck(this, SidebarPreview);\n\t}\n\n\t_createClass(SidebarPreview, [{\n\t\tkey: 'attach',\n\t\tvalue: function attach(manager) {\n\t\t\tvar handler = this.handlePreview.bind(this);\n\t\t\tsupportedMimeTypes.forEach(function (value) {\n\t\t\t\treturn manager.addPreviewHandler(value, handler);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'handlePreview',\n\t\tvalue: function handlePreview(model, $thumbnailDiv, $thumbnailContainer, fallback) {\n\t\t\tvar previewWidth = $thumbnailContainer.parent().width() + 50; // 50px for negative margins\n\t\t\tvar previewHeight = previewWidth / (16 / 9);\n\n\t\t\tthis.getFileContent(model.getFullPath()).then(function (content) {\n\t\t\t\tcontent = content.filecontents;\n\t\t\t\t$thumbnailDiv.removeClass('icon-loading icon-32');\n\t\t\t\t$thumbnailContainer.addClass('large');\n\t\t\t\t$thumbnailContainer.addClass('text');\n\t\t\t\tvar $editorDiv = $(\"<div id='sidebar_editor'/>\");\n\t\t\t\t$editorDiv.text(content);\n\t\t\t\t$thumbnailDiv.children('.stretcher').remove();\n\t\t\t\t$thumbnailDiv.append($editorDiv);\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_1__ImportAce__[\"a\" /* default */])().then(function (imports) {\n\t\t\t\t\tvar editor = imports.edit('sidebar_editor');\n\t\t\t\t\teditor.setReadOnly(true);\n\t\t\t\t\tvar syntaxModePromise = void 0;\n\t\t\t\t\tif (model.get('mimetype') === 'text/html') {\n\t\t\t\t\t\tsyntaxModePromise = Object(__WEBPACK_IMPORTED_MODULE_0__SyntaxMode__[\"a\" /* getSyntaxMode */])('html');\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Set the syntax mode based on the file extension\n\t\t\t\t\t\tsyntaxModePromise = Object(__WEBPACK_IMPORTED_MODULE_0__SyntaxMode__[\"a\" /* getSyntaxMode */])(model.get('name').split('.')[model.get('name').split('.').length - 1]);\n\t\t\t\t\t}\n\t\t\t\t\tsyntaxModePromise.then(function (mode) {\n\t\t\t\t\t\tif (mode) {\n\t\t\t\t\t\t\teditor.getSession().setMode('ace/mode/' + mode);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t// Set the theme\n\t\t\t\t\t__webpack_require__.e/* import() */(0/* duplicate */).then(__webpack_require__.bind(null, \"./node_modules/brace/theme/clouds.js\")).then(function () {\n\t\t\t\t\t\teditor.setTheme(\"ace/theme/clouds\");\n\t\t\t\t\t});\n\t\t\t\t\t$editorDiv.css(\"height\", previewHeight);\n\t\t\t\t\t$editorDiv.css(\"width\", previewWidth);\n\t\t\t\t});\n\t\t\t}, function () {\n\t\t\t\tfallback();\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'getFileContent',\n\t\tvalue: function getFileContent(path) {\n\t\t\tvar parts = path.split('/');\n\t\t\tvar dir = parts.slice(0, -1).join('');\n\t\t\tvar file = parts.slice(-1).join('');\n\n\t\t\treturn $.ajax({\n\t\t\t\turl: OC.generateUrl('/apps/files_texteditor/ajax/loadfile'),\n\t\t\t\tdata: {\n\t\t\t\t\tfilename: file,\n\t\t\t\t\tdir: dir\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\t'Range': 'bytes=0-10240'\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}]);\n\n\treturn SidebarPreview;\n}();\n\n/***/ }),\n\n/***/ \"./js/supported_mimetypes.json\":\n/***/ (function(module, exports) {\n\nmodule.exports = [\"text\",\"application/cmd\",\"application/javascript\",\"application/json\",\"application/xml\",\"application/x-empty\",\"application/x-msdos-program\",\"application/x-php\",\"application/x-pearl\",\"application/x-text\",\"application/yaml\"]\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// editor.js"," \t// install a JSONP callback for chunk loading\n \tvar parentJsonpFunction = window[\"webpackJsonpTexteditor\"];\n \twindow[\"webpackJsonpTexteditor\"] = function webpackJsonpCallback(chunkIds, moreModules, executeModules) {\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [], result;\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules, executeModules);\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t};\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// objects to store loaded and loading chunks\n \tvar installedChunks = {\n \t\t30: 0\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData === 0) {\n \t\t\treturn new Promise(function(resolve) { resolve(); });\n \t\t}\n\n \t\t// a Promise means \"currently loading\".\n \t\tif(installedChunkData) {\n \t\t\treturn installedChunkData[2];\n \t\t}\n\n \t\t// setup Promise in chunk cache\n \t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t});\n \t\tinstalledChunkData[2] = promise;\n\n \t\t// start chunk loading\n \t\tvar head = document.getElementsByTagName('head')[0];\n \t\tvar script = document.createElement('script');\n \t\tscript.type = \"text/javascript\";\n \t\tscript.charset = 'utf-8';\n \t\tscript.async = true;\n \t\tscript.timeout = 120000;\n\n \t\tif (__webpack_require__.nc) {\n \t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t}\n \t\tscript.src = __webpack_require__.p + \"\" + ({\"1\":\"markdown-mode\",\"2\":\"php-mode\",\"3\":\"html-mode\",\"4\":\"svg-mode\",\"5\":\"xml-mode\",\"6\":\"scala-mode\",\"7\":\"lua-mode\",\"8\":\"json-mode\",\"9\":\"js-mode\",\"10\":\"java-mode\",\"11\":\"groovy-mode\",\"12\":\"css-mode\",\"13\":\"coffee-mode\",\"14\":\"ace\",\"15\":\"textile-mode\",\"16\":\"sql-mode\",\"17\":\"sh-mode\",\"18\":\"scss-mode\",\"19\":\"scad-mode\",\"20\":\"rb-mode\",\"21\":\"py-mode\",\"22\":\"ps1-mode\",\"23\":\"pl-mode\",\"24\":\"ml-mode\",\"25\":\"less-mode\",\"26\":\"latex-mode\",\"27\":\"cs-mode\",\"28\":\"h-mode\",\"29\":\"bat-mode\"}[chunkId]||chunkId) + \".bundle.js\";\n \t\tvar timeout = setTimeout(onScriptComplete, 120000);\n \t\tscript.onerror = script.onload = onScriptComplete;\n \t\tfunction onScriptComplete() {\n \t\t\t// avoid mem leaks in IE.\n \t\t\tscript.onerror = script.onload = null;\n \t\t\tclearTimeout(timeout);\n \t\t\tvar chunk = installedChunks[chunkId];\n \t\t\tif(chunk !== 0) {\n \t\t\t\tif(chunk) {\n \t\t\t\t\tchunk[1](new Error('Loading chunk ' + chunkId + ' failed.'));\n \t\t\t\t}\n \t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t}\n \t\t};\n \t\thead.appendChild(script);\n\n \t\treturn promise;\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./js/index.js\");\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1894bb367116bd263052","/*\n * @copyright Copyright (c) 2019 Julius Härtl <jus@bitgrid.net>\n *\n * @author Julius Härtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nexport default function() {\n\treturn import(/* webpackChunkName: \"ace\" */'brace')\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/ImportAce.js","const filetype = {};\n// add file extensions like this: filetype[\"extension\"] = \"filetype\":\nfiletype[\"bat\"] = \"batchfile\";\nfiletype[\"cmd\"] = \"batchfile\";\nfiletype[\"h\"] = \"c_cpp\";\nfiletype[\"c\"] = \"c_cpp\";\nfiletype[\"clj\"] = \"clojure\";\nfiletype[\"coffee\"] = \"coffee\"; // coffescript can be compiled to javascript\nfiletype[\"cpp\"] = \"c_cpp\";\nfiletype[\"cs\"] = \"csharp\";\nfiletype[\"css\"] = \"css\";\nfiletype[\"groovy\"] = \"groovy\";\nfiletype[\"htm\"] = \"html\";\nfiletype[\"html\"] = \"html\";\nfiletype[\"tt\"] = \"html\";\nfiletype[\"java\"] = \"java\";\nfiletype[\"js\"] = \"javascript\";\nfiletype[\"jsm\"] = \"javascript\";\nfiletype[\"json\"] = \"json\";\nfiletype[\"latex\"] = \"latex\";\nfiletype[\"tex\"] = \"latex\";\nfiletype[\"less\"] = \"less\";\nfiletype[\"ly\"] = \"latex\";\nfiletype[\"ily\"] = \"latex\";\nfiletype[\"lua\"] = \"lua\";\nfiletype[\"markdown\"] = \"markdown\";\nfiletype[\"md\"] = \"markdown\";\nfiletype[\"mdown\"] = \"markdown\";\nfiletype[\"mdwn\"] = \"markdown\";\nfiletype[\"mkd\"] = \"markdown\";\nfiletype[\"ml\"] = \"ocaml\";\nfiletype[\"mli\"] = \"ocaml\";\nfiletype[\"pl\"] = \"perl\";\nfiletype[\"php\"] = \"php\";\nfiletype[\"ps1\"] = \"powershell\";\nfiletype[\"py\"] = \"python\";\nfiletype[\"rb\"] = \"ruby\";\nfiletype[\"scad\"] = \"scad\"; // seems to be something like 3d model files printed with e.g. reprap\nfiletype[\"scala\"] = \"scala\";\nfiletype[\"scss\"] = \"scss\"; // \"sassy css\"\nfiletype[\"sh\"] = \"sh\";\nfiletype[\"sql\"] = \"sql\";\nfiletype[\"svg\"] = \"svg\";\nfiletype[\"textile\"] = \"textile\"; // related to markdown\nfiletype[\"xml\"] = \"xml\";\n\nconst loaders = {};\n// add loader like this: loaders[\"filetype\"] = () => require(\"promise?brace/mode/filetype\"):\n\n// note that these require statements can't be generated from the filetypes dynamically\n// to make sure webpack can analyse our dependencies\nloaders[\"batchfile\"] = () => import(\n\t/* webpackChunkName: \"bat-mode\" */\n\t\"brace/mode/batchfile\"\n\t);\nloaders[\"c_cpp\"] = () => import(\n\t/* webpackChunkName: \"h-mode\" */\n\t\"brace/mode/c_cpp\"\n\t);\nloaders[\"coffee\"] = () => import\n\t/* webpackChunkName: \"coffee-mode\" */(\n\t\"brace/mode/coffee\"\n\t);\nloaders[\"cs\"] = () => import(\n\t/* webpackChunkName: \"cs-mode\" */\n\t\"brace/mode/csharp\"\n\t);\nloaders[\"css\"] = () => import(\n\t/* webpackChunkName: \"css-mode\" */\n\t\"brace/mode/css\"\n\t);\nloaders[\"groovy\"] = () => import\n\t/* webpackChunkName: \"groovy-mode\" */(\n\t\"brace/mode/groovy\"\n\t);\nloaders[\"html\"] = () => import(\n\t/* webpackChunkName: \"html-mode\" */\n\t\"brace/mode/html\"\n\t);\nloaders[\"java\"] = () => import(\n\t/* webpackChunkName: \"java-mode\" */\n\t\"brace/mode/java\"\n\t);\nloaders[\"javascript\"] = () => import(\n\t/* webpackChunkName: \"js-mode\" */\n\t\"brace/mode/javascript\"\n\t);\nloaders[\"json\"] = () => import(\n\t/* webpackChunkName: \"json-mode\" */\n\t\"brace/mode/json\"\n\t);\nloaders[\"latex\"] = () => import(\n\t/* webpackChunkName: \"latex-mode\" */\n\t\"brace/mode/latex\"\n\t);\nloaders[\"less\"] = () => import(\n\t/* webpackChunkName: \"less-mode\" */\n\t\"brace/mode/less\"\n\t);\nloaders[\"lua\"] = () => import(\n\t/* webpackChunkName: \"lua-mode\" */\n\t\"brace/mode/lua\"\n\t);\nloaders[\"markdown\"] = () => import(\n\t/* webpackChunkName: \"markdown-mode\" */\n\t\"brace/mode/markdown\"\n\t);\nloaders[\"ocaml\"] = () => import(\n\t/* webpackChunkName: \"ml-mode\" */\n\t\"brace/mode/ocaml\"\n\t);\nloaders[\"perl\"] = () => import(\n\t/* webpackChunkName: \"pl-mode\" */\n\t\"brace/mode/perl\"\n\t);\nloaders[\"php\"] = () => import(\n\t/* webpackChunkName: \"php-mode\" */\n\t\"brace/mode/php\"\n\t);\nloaders[\"powershell\"] = () => import(\n\t/* webpackChunkName: \"ps1-mode\" */\n\t\"brace/mode/powershell\"\n\t);\nloaders[\"python\"] = () => import(\n\t/* webpackChunkName: \"py-mode\" */\n\t\"brace/mode/python\"\n\t);\nloaders[\"ruby\"] = () => import(\n\t/* webpackChunkName: \"rb-mode\" */\n\t\"brace/mode/ruby\"\n\t);\nloaders[\"scad\"] = () => import(\n\t/* webpackChunkName: \"scad-mode\" */\n\t\"brace/mode/scad\"\n\t); // seems to be something like 3d model files printed with e.g. reprap\nloaders[\"scala\"] = () => import(\n\t/* webpackChunkName: \"scala-mode\" */\n\t\"brace/mode/scala\"\n\t);\nloaders[\"scss\"] = () => import(\n\t/* webpackChunkName: \"scss-mode\" */\n\t\"brace/mode/scss\"); // \"sassy css\"\nloaders[\"sh\"] = () => import(\n\t/* webpackChunkName: \"sh-mode\" */\n\t\"brace/mode/sh\"\n\t);\nloaders[\"sql\"] = () => import(\n\t/* webpackChunkName: \"sql-mode\" */\n\t\"brace/mode/sql\"\n\t);\nloaders[\"svg\"] = () => import(\n\t/* webpackChunkName: \"svg-mode\" */\n\t\"brace/mode/svg\"\n\t);\nloaders[\"textile\"] = () => import(\n\t/* webpackChunkName: \"textile-mode\" */\n\t\"brace/mode/textile\"); // related to markdown\nloaders[\"xml\"] = () => import(\n\t/* webpackChunkName: \"xml-mode\" */\n\t\"brace/mode/xml\"\n\t);\n\nexport function getSyntaxMode (extension) {\n\tconst type = filetype[extension];\n\tif (type) {\n\t\t// Then it must be in the array, so load the custom syntax mode\n\t\t// Set the syntax mode\n\t\treturn loaders[type]().then(() => {\n\t\t\treturn type;\n\t\t});\n\t}\n\n\treturn $.when();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/SyntaxMode.js","import {getSyntaxMode} from './SyntaxMode';\nimport importAce from './ImportAce';\n\n/** @type array[] supportedMimeTypes */\nconst supportedMimeTypes = require('./supported_mimetypes.json');\n\nlet ace;\nexport const Texteditor = {\n\n\t/**\n\t * Holds the editor container\n\t */\n\t$container: null,\n\n\t/**\n\t * Holds the editor element ID\n\t */\n\teditor: 'editor',\n\n\t/**\n\t * Stores info on the file being edited\n\t */\n\tfile: {\n\t\tedited: false,\n\t\tmtime: null,\n\t\tdir: null,\n\t\tname: null,\n\t\twriteable: null,\n\t\tmime: null,\n\t\tsize: null\n\t},\n\n\t/**\n\t * Stored the saving state\n\t */\n\tsaving: false,\n\n\t/**\n\t * Current files app context\n\t */\n\tcurrentContext: null,\n\n\t/**\n\t * Stores the autosave timer\n\t */\n\tsaveTimer: null,\n\n\t/**\n\t * Stores the old page title\n\t */\n\toldTitle: null,\n\n\t/**\n\t * Stores the timeout for the saving message\n\t */\n\tsaveMessageTimeout: null,\n\n\t/**\n\t * preview plugins by mimetype\n\t */\n\tpreviewPlugins: {},\n\n\tregisterPreviewPlugin: function (mimeType, plugin) {\n\t\tthis.previewPlugins[mimeType] = plugin;\n\t},\n\n\tpreviewPluginsLoaded: {},\n\n\t/**\n\t * preview element\n\t */\n\tpreview: null,\n\n\tpreviewPluginOnChange: null,\n\n\t/**\n\t * Save handler, triggered by the button, or keyboard\n\t */\n\t_onSaveTrigger: function () {\n\t\t// Don't save if not edited\n\t\tif (!Texteditor.file.edited) {\n\t\t\treturn;\n\t\t}\n\t\t// Don't try to save twice\n\t\tif (Texteditor.saving) {\n\t\t\treturn;\n\t\t} else {\n\t\t\tTexteditor.saving = true;\n\t\t\tTexteditor.file.edited = false;\n\t\t}\n\n\t\t// Can any fade outs on the saving message\n\t\tclearTimeout(Texteditor.saveMessageTimeout);\n\n\t\t// Set the saving status\n\t\tvar $message = $('#editor_controls').find('small.saving-message');\n\t\t$message.text(t('files_texteditor', 'saving...'))\n\t\t\t.show();\n\t\t// Send to server\n\t\tTexteditor.saveFile(\n\t\t\twindow.aceEditor.getSession().getValue(),\n\t\t\tTexteditor.file,\n\t\t\tfunction (data) {\n\t\t\t\t// Yay\n\t\t\t\tif (Texteditor.file.edited == false) {\n\t\t\t\t\tdocument.title = Texteditor.file.name + ' - ' + Texteditor.oldTitle;\n\t\t\t\t\t$('small.unsaved-star').css('display', 'none');\n\t\t\t\t}\n\t\t\t\tTexteditor.file.mtime = data.mtime;\n\t\t\t\tTexteditor.file.size = data.size;\n\n\t\t\t\t$message.text(t('files_texteditor', 'saved!'));\n\t\t\t\tTexteditor.saveMessageTimeout = setTimeout(function () {\n\t\t\t\t\t$('small.saving-message').fadeOut(200);\n\t\t\t\t}, 2000);\n\t\t\t},\n\t\t\tfunction (message) {\n\t\t\t\t// Boo\n\t\t\t\tif (typeof message == 'undefined') {\n\t\t\t\t\t$('small.saving-message').text(t('files_texteditor', 'failed!'));\n\t\t\t\t} else {\n\t\t\t\t\t$('small.saving-message').text(message);\n\t\t\t\t}\n\t\t\t\tTexteditor.saveMessageTimeout = setTimeout(function () {\n\t\t\t\t\t$('small.saving-message').fadeOut(200);\n\t\t\t\t}, 5000);\n\t\t\t\tTexteditor.file.edited = true;\n\t\t\t}\n\t\t);\n\t\tTexteditor.saving = false;\n\t\twindow.aceEditor.focus();\n\t},\n\n\t/**\n\t * Handles on close button click\n\t */\n\t_onCloseTrigger: function () {\n\t\t// Hide or close?\n\t\tif (!Texteditor.file.edited) {\n\t\t\tTexteditor.closeEditor();\n\t\t} else {\n\t\t\t// Trick the autosave attempt into thinking we have no changes\n\t\t\tTexteditor.file.edited = false;\n\t\t\t// Hide the editor\n\t\t\tTexteditor.hideEditor();\n\t\t\t// Try to save\n\t\t\tTexteditor.saveFile(\n\t\t\t\twindow.aceEditor.getSession().getValue(),\n\t\t\t\tTexteditor.file,\n\t\t\t\tfunction () {\n\t\t\t\t\tOC.Notification.showTemporary(t(\n\t\t\t\t\t\t'files_texteditor',\n\t\t\t\t\t\t'Saved'\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t\t// Remove the editor\n\t\t\t\t\tTexteditor.closeEditor();\n\t\t\t\t},\n\t\t\t\tfunction () {\n\t\t\t\t\tOC.Notification.showTemporary(t(\n\t\t\t\t\t\t'files_texteditor',\n\t\t\t\t\t\t'There was a problem saving your changes. Click to resume editing.'\n\t\t\t\t\t));\n\t\t\t\t\t$('#notification').data('reopeneditor', true).on(\n\t\t\t\t\t\t'click',\n\t\t\t\t\t\tTexteditor._onReOpenTrigger\n\t\t\t\t\t);\n\t\t\t\t\tTexteditor.file.edited = true;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t},\n\n\t/**\n\t * Handles the trigger or re open editor\n\t */\n\t_onReOpenTrigger: function () {\n\t\tif ($('#notification').data('reopeneditor') == true) {\n\t\t\tdocument.title = Texteditor.file.name + ' - ' + Texteditor.oldTitle;\n\t\t\tTexteditor.$container.show();\n\t\t}\n\t},\n\n\t/**\n\t * Handles the FileAction click event\n\t */\n\t_onEditorTrigger: function (filename, context) {\n\t\tthis.currentContext = context;\n\t\tthis.file.name = filename;\n\t\tthis.file.dir = context.dir;\n\t\tthis.fileList = context.fileList;\n\t\timportAce().then((_ace) => {\n\t\t\tace = _ace;\n\t\t\tthis.loadEditor(\n\t\t\t\tTexteditor.$container,\n\t\t\t\tTexteditor.file\n\t\t\t);\n\t\t\thistory.pushState({\n\t\t\t\tfile: filename,\n\t\t\t\tdir: context.dir\n\t\t\t}, 'Editor', '#editor');\n\t\t});\n\t},\n\n\t/**\n\t * Handler for edits detected\n\t */\n\t_onEdit: function () {\n\t\tif (!Texteditor.file.edited) {\n\t\t\tTexteditor.file.edited = true;\n\t\t\tif (!Texteditor.saving) {\n\t\t\t\tTexteditor._onUnsaved();\n\t\t\t}\n\t\t}\n\t\tif (this.previewPluginOnChange) {\n\t\t\tvar text = window.aceEditor.getSession().getValue();\n\t\t\tthis.previewPluginOnChange(text, this.preview);\n\t\t}\n\t},\n\n\t/**\n\t * Handler when unsaved work is detected\n\t */\n\t_onUnsaved: function () {\n\t\tdocument.title = '* ' + Texteditor.file.name + ' - ' + Texteditor.oldTitle;\n\t\t$('small.unsaved-star').css('display', 'inline-block');\n\t},\n\n\t/**\n\t * Setup on page load\n\t */\n\tinitialize: function (container) {\n\t\t// Don't load if not in the files app TODO: Fix for sharing\n\t\tif (!$('#content.app-files').length) {\n\t\t\treturn;\n\t\t}\n\t\tthis.$container = container;\n\t\tthis.registerFileActions();\n\t\tthis.oldTitle = document.title;\n\t},\n\n\t/**\n\t * Registers the file actions\n\t */\n\tregisterFileActions: function () {\n\t\tsupportedMimeTypes.forEach((mime) => {\n\t\t\tOCA.Files.fileActions.registerAction({\n\t\t\t\tname: 'Edit',\n\t\t\t\tmime: mime,\n\t\t\t\tactionHandler: this._onEditorTrigger.bind(this),\n\t\t\t\tpermissions: OC.PERMISSION_READ,\n\t\t\t\ticon: function () {\n\t\t\t\t\treturn OC.imagePath('core', 'actions/edit');\n\t\t\t\t}\n\t\t\t});\n\t\t\tOCA.Files.fileActions.setDefault(mime, 'Edit');\n\t\t});\n\t},\n\n\t/**\n\t * Actually fire up the editor in a container\n\t */\n\tloadEditor: function (container, file) {\n\t\tvar _self = this;\n\t\t// Insert the editor into the container\n\t\tcontainer.html(\n\t\t\t'<div id=\"editor_overlay\"></div>'\n\t\t\t+'<div id=\"editor_container\" class=\"icon-loading\">'\n\t\t\t+'<div id=\"editor_wrap\"><div id=\"editor\"></div>'\n\t\t\t+'<div id=\"preview_wrap\"><div id=\"preview\"></div></div></div></div>');\n\t\t$('#content').append(container);\n\n\t\t// Get the file data\n\t\tthis.loadFile(\n\t\t\tfile.dir,\n\t\t\tfile.name,\n\t\t\tfunction (file, data) {\n\t\t\t\t// Success!\n\t\t\t\t// Sort the title\n\t\t\t\tdocument.title = file.name + ' - ' + Texteditor.oldTitle;\n\t\t\t\t// Load ace\n\t\t\t\t$('#' + _self.editor).text(data);\n\t\t\t\t// Remove loading\n\t\t\t\t$('#editor_container').removeClass('icon-loading');\n\t\t\t\t// Configure ace\n\t\t\t\t_self.configureACE(file);\n\t\t\t\t// Show the controls\n\t\t\t\t_self.loadControlBar(file);\n\t\t\t\twindow.aceEditor.getSession().on('change', _self.setupAutosave);\n\t\t\t\t_self.bindVisibleActions();\n\t\t\t\twindow.aceEditor.focus();\n\n\t\t\t\tif (_self.previewPlugins[file.mime]) {\n\t\t\t\t\t_self.preview = container.find('#preview');\n\t\t\t\t\t_self.preview.addClass(file.mime.replace('/', '-'));\n\t\t\t\t\tcontainer.find('#editor_container').addClass('hasPreview');\n\t\t\t\t\t_self.previewPluginOnChange = _.debounce(function (text, element) {\n\t\t\t\t\t\t_self.loadPreviewPlugin(file.mime).then(function () {\n\t\t\t\t\t\t\t_self.previewPlugins[file.mime].preview(text, element);\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 200);\n\t\t\t\t\tvar text = window.aceEditor.getSession().getValue();\n\t\t\t\t\t_self.previewPluginOnChange(text, _self.preview);\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\twindow.aceEditor.resize();\n\t\t\t\t\t}, 500);\n\t\t\t\t\t_self.loadPreviewControlBar();\n\t\t\t\t} else {\n\t\t\t\t\t_self.previewPluginOnChange = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\tfunction (message) {\n\t\t\t\t// Oh dear\n\t\t\t\tOC.dialogs.alert(message, t('files_texteditor', 'An error occurred!'));\n\t\t\t\t_self.closeEditor();\n\t\t\t});\n\t},\n\n\tloadPreviewPlugin: function (mime) {\n\t\tif (this.previewPluginsLoaded[mime]) {\n\t\t\treturn $.Deferred().resolve().promise();\n\t\t}\n\t\tthis.previewPluginsLoaded[mime] = true;\n\t\tvar plugin = this.previewPlugins[mime];\n\t\treturn $.when(plugin.init());\n\t},\n\n\t/**\n\t * Load the editor control bar\n\t */\n\tloadControlBar: function (file) {\n\t\tvar html =\n\t\t\t'<small class=\"filename\">' + escapeHTML(file.name) + '</small>'\n\t\t\t+ '<small class=\"unsaved-star\" style=\"display: none\">*</small>'\n\t\t\t+ '<small class=\"saving-message\">'\n\t\t\t+ '</small>'\n\t\t\t+ '<button id=\"editor_close\" class=\"icon-close svg\"></button>';\n\t\tvar controlBar = $('<div id=\"editor_controls\"></div>').html(html);\n\t\t$('#editor_wrap').before(controlBar);\n\t\tthis.setFilenameMaxLength();\n\t\tthis.bindControlBar();\n\n\t},\n\n\tsetPreviewMode: function (mode) {\n\t\tvar container = $('#app-content-texteditor');\n\t\tvar controlBar = $('#preview_editor_controls');\n\t\tcontrolBar.find('button').removeClass('active');\n\t\tcontrolBar.find('button[data-type=\"' + mode + '\"]').addClass('active');\n\t\tswitch (mode) {\n\t\t\tcase 'mixed':\n\t\t\t\tcontainer.find('#editor_container').addClass('hasPreview');\n\t\t\t\tcontainer.find('#editor_container').removeClass('onlyPreview');\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\tcontainer.find('#editor_container').removeClass('hasPreview');\n\t\t\t\tcontainer.find('#editor_container').removeClass('onlyPreview');\n\t\t\t\tbreak;\n\t\t\tcase 'image':\n\t\t\t\tcontainer.find('#editor_container').addClass('hasPreview');\n\t\t\t\tcontainer.find('#editor_container').addClass('onlyPreview');\n\t\t\t\tbreak;\n\t\t}\n\t\tsetTimeout(function() {\n\t\t\twindow.aceEditor.resize();\n\t\t}, 500);\n\t},\n\n\tloadPreviewControlBar: function () {\n\t\tvar makeButton = function (type, tooltip, active) {\n\t\t\tvar button = $('<button/>');\n\t\t\tbutton.tooltip({\n\t\t\t\ttitle: tooltip,\n\t\t\t\tcontainer: 'body',\n\t\t\t\tplacement: 'bottom',\n\t\t\t\tdelay: {show: 500, hide: 0}\n\t\t\t});\n\t\t\tif (active) {\n\t\t\t\tbutton.addClass('active');\n\t\t\t}\n\t\t\tbutton.click(this.setPreviewMode.bind(this, type));\n\t\t\tbutton.attr('data-type', type);\n\t\t\treturn button.css('background-image', 'url(\"' + OC.imagePath('files_texteditor', type) + '\")');\n\t\t}.bind(this);\n\n\t\tvar controls = $('<span/>').attr('id', 'preview_editor_controls');\n\t\tcontrols.append(makeButton('text', t('files_texteditor', 'Edit')));\n\t\tcontrols.append(makeButton('mixed', t('files_texteditor', 'Mixed'), true));\n\t\tcontrols.append(makeButton('image', t('files_texteditor', 'Preview')));\n\t\t$('#editor_close').after(controls);\n\t},\n\n\t/**\n\t * Removes the control bar\n\t */\n\tunloadControlBar: function () {\n\t\t$('#editor_controls').remove();\n\t},\n\n\t/**\n\t * Set the max width of the filename to prevent wrapping\n\t */\n\tsetFilenameMaxLength: function () {\n\t\t// Get the width of the control bar\n\t\tvar controlBar = $('#editor_controls').width();\n\t\t// Get the width of all of the other controls\n\t\tvar controls = $('small.saving-message').outerWidth(true);\n\t\tcontrols += $('small.unsaved-star').outerWidth(true);\n\t\tcontrols += $('#editor_close').outerWidth(true);\n\t\t// Set the max width\n\t\t$('small.filename').css('max-width', controlBar - controls - 28);\n\t},\n\n\t/**\n\t * Binds the control events on the control bar\n\t */\n\tbindControlBar: function () {\n\t\t$('#editor_close').on('click', _.bind(this._onCloseTrigger, this));\n\t\t$(window).resize(Texteditor.setFilenameMaxLength);\n\t\twindow.onpopstate = function () {\n\t\t\tvar hash = location.hash.substr(1);\n\t\t\tif (hash.substr(0, 6) !== 'editor') {\n\t\t\t\tthis._onCloseTrigger();\n\t\t\t}\n\t\t}.bind(this);\n\t},\n\n\t/**\n\t * Configure the ACE editor\n\t */\n\tconfigureACE: function (file) {\n\t\twindow.aceEditor = ace.edit(this.editor);\n\t\taceEditor.getSession().setNewLineMode(\"windows\");\n\t\taceEditor.setShowPrintMargin(false);\n\t\taceEditor.getSession().setUseWrapMode(true);\n\t\tif (!file.writeable) {\n\t\t\taceEditor.setReadOnly(true);\n\t\t}\n\t\tif (file.mime && file.mime === 'text/html') {\n\t\t\tthis.setEditorSyntaxMode('html');\n\t\t} else {\n\t\t\t// Set the syntax mode based on the file extension\n\t\t\tthis.setEditorSyntaxMode(\n\t\t\t\tfile.name.split('.')[file.name.split('.').length - 1]\n\t\t\t);\n\t\t}\n\t\t// Set the theme\n\t\timport('brace/theme/clouds').then(() => {\n\t\t\twindow.aceEditor.setTheme(\"ace/theme/clouds\");\n\t\t});\n\t\t// Bind the edit event\n\t\twindow.aceEditor.getSession().on('change', this._onEdit.bind(this));\n\t\t// Bind save trigger\n\t\twindow.aceEditor.commands.addCommand({\n\t\t\tname: \"save\",\n\t\t\tbindKey: {\n\t\t\t\twin: \"Ctrl-S\",\n\t\t\t\tmac: \"Command-S\",\n\t\t\t\tsender: \"editor\"\n\t\t\t},\n\t\t\texec: Texteditor._onSaveTrigger\n\t\t});\n\n\t\t// disable Ctrl-T shortcut in ace to allow new tab feature in browser\n\t\twindow.aceEditor.commands.removeCommand(window.aceEditor.commands.byName.transposeletters);\n\t},\n\n\t/**\n\t * Sets the syntax highlighting for the editor based on the file extension\n\t */\n\tsetEditorSyntaxMode: function (extension) {\n\t\tgetSyntaxMode(extension).then(function (mode) {\n\t\t\tif (mode) {\n\t\t\t\twindow.aceEditor.getSession().setMode(`ace/mode/${mode}`);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Loads the data through AJAX\n\t */\n\tloadFile: function (dir, filename, success, failure) {\n\t\t$.get(\n\t\t\tOC.generateUrl('/apps/files_texteditor/ajax/loadfile'),\n\t\t\t{\n\t\t\t\tfilename: filename,\n\t\t\t\tdir: dir\n\t\t\t}\n\t\t).done(function (data) {\n\t\t\t// Call success callback\n\t\t\tTexteditor.file.writeable = data.writeable;\n\t\t\tTexteditor.file.mime = data.mime;\n\t\t\tTexteditor.file.mtime = data.mtime;\n\t\t\tsuccess(Texteditor.file, data.filecontents);\n\t\t}).fail(function (jqXHR) {\n\t\t\tfailure(JSON.parse(jqXHR.responseText).message);\n\t\t});\n\t},\n\n/**\n * Send the new file data back to the server\n */\nsaveFile: function (data, file, success, failure) {\n\t// Send the post request\n\tvar path = file.dir + file.name;\n\tif (file.dir !== '/') {\n\t\tpath = file.dir + '/' + file.name;\n\t}\n\t$.ajax({\n\t\ttype: 'PUT',\n\t\turl: OC.generateUrl('/apps/files_texteditor/ajax/savefile'),\n\t\tdata: {\n\t\t\tfilecontents: data,\n\t\t\tpath: path,\n\t\t\tmtime: file.mtime\n\t\t}\n\t})\n\t\t.done(success)\n\t\t.fail(function (jqXHR) {\n\t\t\tvar message;\n\n\t\t\ttry {\n\t\t\t\tmessage = JSON.parse(jqXHR.responseText).message;\n\t\t\t} catch (e) {\n\t\t\t}\n\n\t\t\tfailure(message);\n\t\t});\n},\n\n/**\n * Close the editor for good\n */\ncloseEditor: function () {\n\tthis.$container.html('').show();\n\tthis.unloadControlBar();\n\tthis.unBindVisibleActions();\n\tvar fileInfoModel = this.fileList.getModelForFile(this.file.name);\n\tif (fileInfoModel) {\n\t\tfileInfoModel.set({\n\t\t\t// temp dummy, until we can do a PROPFIND\n\t\t\tetag: fileInfoModel.get('id') + this.file.mtime,\n\t\t\tmtime: this.file.mtime * 1000,\n\t\t\tsize: this.file.size\n\t\t});\n\t}\n\tdocument.title = this.oldTitle;\n},\n\n/**\n * Hide the editor (unsaved changes)\n */\nhideEditor: function () {\n\tthis.$container.hide();\n\tdocument.title = this.oldTitle;\n\tthis.unBindVisibleActions();\n},\n\n/**\n * Configure the autosave timer\n */\n\tsetupAutosave: function () {\n\t\tclearTimeout(this.saveTimer);\n\t\tthis.saveTimer = setTimeout(Texteditor._onSaveTrigger, 3000);\n\t},\n\n\t/**\n\t * Handles event when clicking outside editor\n\t */\n\t_onClickDocument: function (event) {\n\t\t// Check if click was inside the editor or not.\n\t\tif (!$(event.target).closest('#editor_container').length && !$(event.target).closest('.oc-dialog').length) {\n\t\t\t// Edit the editor\n\t\t\tTexteditor._onCloseTrigger();\n\t\t}\n\t},\n\n\t/*\n\t * Binds actions that need to happen whilst the editor is visible\n\t */\n\tbindVisibleActions: function () {\n\t\t$(document).bind('click', this._onClickDocument);\n\t},\n\n\t/**\n\t * Unbinds actions that happen whilst the editor is visible\n\t */\n\tunBindVisibleActions: function () {\n\t\t$(document).unbind('click', this._onClickDocument);\n\t}\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/editor.js","/**\n * ownCloud - Files_Texteditor\n *\n * This file is licensed under the Affero General Public License version 3 or\n * later. See the COPYING file.\n *\n * @author Tom Needham <tom@owncloud.com>\n * @copyright Tom Needham 2015\n */\n\nimport {SidebarPreview} from './sidebarpreview';\nimport {Texteditor} from './editor';\nimport {newFileMenuPlugin} from './newfileplugin';\n\n// convince webpack to load chunks\n__webpack_require__.p = OC.filePath('files_texteditor', 'js', '../build/');\nconst script = document.querySelector('[nonce]');\n__webpack_require__.nc = script['nonce'] || script.getAttribute('nonce');\n\nOCA.Files_Texteditor = Texteditor;\n\nOC.Plugins.register('OCA.Files.NewFileMenu', newFileMenuPlugin);\nOC.Plugins.register('OCA.Files.SidebarPreviewManager', new SidebarPreview());\n\n$(document).ready(function () {\n\t$('#editor').remove();\n\tOCA.Files_Texteditor.initialize($('<div id=\"app-content-texteditor\"></div>'));\n});\n\n\n\n// WEBPACK FOOTER //\n// ./js/index.js","export const newFileMenuPlugin = {\n\n\tattach: function (menu) {\n\t\tvar fileList = menu.fileList;\n\n\t\t// only attach to main file list, public view is not supported yet\n\t\tif (fileList.id !== 'files') {\n\t\t\treturn;\n\t\t}\n\n\t\t// register the new menu entry\n\t\tmenu.addMenuEntry({\n\t\t\tid: 'file',\n\t\t\tdisplayName: t('files_texteditor', 'New text file'),\n\t\t\ttemplateName: t('files_texteditor', 'New text file.txt'),\n\t\t\ticonClass: 'icon-filetype-text',\n\t\t\tfileType: 'file',\n\t\t\tactionHandler: function (name) {\n\t\t\t\tvar dir = fileList.getCurrentDirectory();\n\t\t\t\t// first create the file\n\t\t\t\tfileList.createFile(name).then(function () {\n\t\t\t\t\t// once the file got successfully created,\n\t\t\t\t\t// open the editor\n\t\t\t\t\tFiles_Texteditor._onEditorTrigger(\n\t\t\t\t\t\tname,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfileList: fileList,\n\t\t\t\t\t\t\tdir: dir\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/newfileplugin.js","/*\n * Copyright (c) 2016\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\nimport {getSyntaxMode} from \"./SyntaxMode\";\nimport importAce from './ImportAce';\n\n/** @type array[] supportedMimeTypes */\nconst supportedMimeTypes = require('./supported_mimetypes.json');\n\nexport class SidebarPreview {\n\tattach (manager) {\n\t\tconst handler = this.handlePreview.bind(this);\n\t\tsupportedMimeTypes.forEach(value => manager.addPreviewHandler(value, handler));\n\t}\n\n\thandlePreview (model, $thumbnailDiv, $thumbnailContainer, fallback) {\n\t\tconst previewWidth = $thumbnailContainer.parent().width() + 50;  // 50px for negative margins\n\t\tconst previewHeight = previewWidth / (16 / 9);\n\n\t\tthis.getFileContent(model.getFullPath()).then(function (content) {\n\t\t\tcontent = content.filecontents;\n\t\t\t$thumbnailDiv.removeClass('icon-loading icon-32');\n\t\t\t$thumbnailContainer.addClass('large');\n\t\t\t$thumbnailContainer.addClass('text');\n\t\t\tconst $editorDiv = $(\"<div id='sidebar_editor'/>\");\n\t\t\t$editorDiv.text(content);\n\t\t\t$thumbnailDiv.children('.stretcher').remove();\n\t\t\t$thumbnailDiv.append($editorDiv);\n\t\t\timportAce().then((imports) => {\n\t\t\t\tconst editor = imports.edit('sidebar_editor');\n\t\t\t\teditor.setReadOnly(true);\n\t\t\t\tlet syntaxModePromise;\n\t\t\t\tif (model.get('mimetype') === 'text/html') {\n\t\t\t\t\tsyntaxModePromise = getSyntaxMode('html');\n\t\t\t\t} else {\n\t\t\t\t\t// Set the syntax mode based on the file extension\n\t\t\t\t\tsyntaxModePromise = getSyntaxMode(\n\t\t\t\t\t\tmodel.get('name').split('.')[model.get('name').split('.').length - 1]\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tsyntaxModePromise.then(function (mode) {\n\t\t\t\t\tif (mode) {\n\t\t\t\t\t\teditor.getSession().setMode(`ace/mode/${mode}`);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t// Set the theme\n\t\t\t\timport('brace/theme/clouds').then(() => {\n\t\t\t\t\teditor.setTheme(\"ace/theme/clouds\");\n\t\t\t\t});\n\t\t\t\t$editorDiv.css(\"height\", previewHeight);\n\t\t\t\t$editorDiv.css(\"width\", previewWidth);\n\t\t\t});\n\t\t}, function () {\n\t\t\tfallback();\n\t\t});\n\t}\n\n\tgetFileContent (path) {\n\t\tconst parts = path.split('/');\n\t\tconst dir = parts.slice(0, -1).join('');\n\t\tconst file = parts.slice(-1).join('');\n\n\t\treturn $.ajax({\n\t\t\turl: OC.generateUrl('/apps/files_texteditor/ajax/loadfile'),\n\t\t\tdata: {\n\t\t\t\tfilename: file,\n\t\t\t\tdir: dir\n\t\t\t},\n\t\t\theaders: {\n\t\t\t\t'Range': 'bytes=0-10240'\n\t\t\t}\n\t\t});\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/sidebarpreview.js","module.exports = [\"text\",\"application/cmd\",\"application/javascript\",\"application/json\",\"application/xml\",\"application/x-empty\",\"application/x-msdos-program\",\"application/x-php\",\"application/x-pearl\",\"application/x-text\",\"application/yaml\"]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/supported_mimetypes.json\n// module id = ./js/supported_mimetypes.json\n// module chunks = 30"],"sourceRoot":""}